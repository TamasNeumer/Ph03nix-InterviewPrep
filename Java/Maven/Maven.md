# Maven

#### Introduction
**What is Maven**
- Apache Maven is a software project management and comprehension tool. Based on the concept of a project object model (POM), Maven can manage a project's build, reporting a documentation from a central piece of information.
- Contains:
  - PM tool with POM
  - Set of standards
  - Project life cycle
  - Dependency management system
  - Logic for executing plugin goals at life-cycle phases

**Download Maven**
- [Download](https://maven.apache.org/download.cgi) and [Install](https://maven.apache.org/install.html) maven.
  - Download, extract to home, execute `export PATH=/home/phoenix/apache-maven-3.5.0/bin:$PATH`
  - Or go to `./profiles` and do: `PATH="$HOME/bin:$PATH:/home/phoenix/apache-maven-3.5.0/bin"`


#### Working with Maven
- Creating project
```shell
mvn -B archetype:generate \
  -DarchetypeGroupId=org.apache.maven.archetypes \
  -DgroupId=com.mycompany.app \
  -DartifactId=my-app
```
- Compiling project
  - Compiled files will be under `${basedir}/target/classes`
```
mvn compile
```
- Running unit tests
```
mvn test
```
- Creating JAR file
  - After that you'll want to install the artifact you've generated (the JAR file) in your local repository (`${user.home}/.m2/repository` is the default location).
```
mvn package
mvn install
```
- You can also create documentation using Maven:
```
mvn archetype:generate \
  -DarchetypeGroupId=org.apache.maven.archetypes \
  -DarchetypeArtifactId=maven-archetype-site \
  -DgroupId=com.mycompany.app \
  -DartifactId=my-app-site
```

#### POM
**POM basics**
- POM is based on a standard folder structure.
  - (src, target, test etc.)
- POM contains many project details
  - `groupID` ->  unique identifier of the organization or group that created the project
  - `artifactId` -> unique base name of the primary artifact being generated by this project. The primary artifact for a project is typically a JAR file.
  - `packaging` -> indicates the package type to be used by this artifact (e.g. JAR, WAR, EAR, etc.).
  - `version` -> version of the artifact generated by the project
    - What is a SNAPSHOT version?
      - The SNAPSHOT value refers to the 'latest' code along a development branch, and provides no guarantee the code is stable or unchanging. In other words, a SNAPSHOT version is the 'development' version before the final 'release' version.
  - `name` -> display name used for the project
  - `url` -> project's site can be found
  - `description` -> basic description
  - `model` -> describes mavn version used
- Combination of GroupID, ArtifactID and Version should be unique! --> "Coordinates of the project."
- Plugins
  - A plugin is a collection of one or more goals. A goal is a "unit of work" in Maven.
  - Basic plugins, JAR plug-in, Compiler plug-in, Surefire plug-in
  - On the [Plugins website](https://maven.apache.org/plugins/) you find plug-ins for different categories. E.g.: compiling, reporting (documentation generation) etc.
- Adding resources
  - E.g.: Add a test file to simulate sample input
  - Add files under `test/resources`
  -

#### Understanding Maven
**Maven lifecycle**
- Generate
- Execute Maven with lifecycle phase
- Install a Maven artifact
- Run app

**Maven Install**
- If you go into a maven project (project containing a POM file) if you execute `mvn install` you will see that maven executes commands for several lifecycle phases such as fetching resources, compiling, testing, and then creating jar files.

**Maven Repositories**
- Online maven repository `search.maven.org`
- Local maven repository (Home/.m2)
